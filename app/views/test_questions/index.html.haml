<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
$(summa).hide();
$(document).ready(function(){
$("submit_test").click(function(){
$(summa).show();
});
});
</script>
%h1 Take the Test

%table#review
  %thead
    %tr
      - @correctness.each do |id, val|
        - if val == "correct"
          %th#true= id
        - elsif val == "wrong"
          %th#false= id
        - else
          %th= id

%br

= form_tag test_questions_path, :id => 'test_form', :method => 'get' do
  - @questions.each_with_index do |question, i|
    = "#{question.id}."
    = question.content
    = image_tag question.image_url(:thumb).to_s if question.image_url.present?
    %br
    #content_q
      - if  question.option1 != "nil"
        %input{:type => 'radio', :value => "option1", :name => "answers[#{question.id}]", :checked => @answers[question.id] == 'option1'}= question.option1
        %br
      - if  question.option2 != "nil"
        %input{:type => 'radio', :value => "option2", :name => "answers[#{question.id}]", :checked => @answers[question.id] == 'option2'}= question.option2
        %br
      - if  question.option3 != "nil"
        %input{:type => 'radio', :value => "option3", :name => "answers[#{question.id}]", :checked => @answers[question.id] == 'option3'}= question.option3
        %br
      - if  question.option4 != "nil"
        %input{:type => 'radio', :value => "option4", :name => "answers[#{question.id}]", :checked => @answers[question.id] == 'option4'}= question.option4
    - if @answers[question.id] != "blank"
      %br
      #content
        The correct answer is
        %strong
          = question[question.answer]
        and you selected
        %strong
          = question[@answers[question.id]]
        so it was
        %i
          = @correctness[question.id]
    %hr
  %br
  %button{:value => 'Submit All', :id => 'submit_test'}Submit All
  
  = link_to 'Summary', {:controller => "test_questions", :action => "summary", :count => @count}, :id => 'summa'
